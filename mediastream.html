<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1">
  <meta id="theme-color" name="theme-color" content="#ffffff">

  <title>getUserMedia</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">

  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</head>

<body>
  <div>
    <h1><a href="#" title="WebRTC samples homepage">Get a Media Stream</a>
      <span>getUserMedia</span>
    </h1>

    <video id="gum-local" content="width=device-width, initial-scale=0.5" autoplay playsinline></video>

    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" id="showVideo">
      Open camera
    </button>

    <div id="errorMsg"></div>

  </div>
  <script>
    const videoConstraints = {
      audio: false,
      video: {
        width: 780, height: 408
      }
    }

    document.querySelector("#showVideo").addEventListener('click', (e) => initialize(e))

    async function initialize(e) {
      try {
        const stream = await navigator.mediaDevices.getUserMedia(videoConstraints)
        const videoElement = document.querySelector("video")

        window.stream = stream
        videoElement.srcObject = stream

        e.target.disabled = true
      } catch (e) {
        const errElement = document.querySelector("#errorMsg")
        errElement.innerHTML += `<p>Something went wrong: ${e.name}</p>`
      }
    }


    const peerConnection = new RTCPeerConnection();



  </script>

</body>

</html>